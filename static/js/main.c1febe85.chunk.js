(this["webpackJsonptodo-app-ts-styled-components-graphql"]=this["webpackJsonptodo-app-ts-styled-components-graphql"]||[]).push([[0],{63:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var o,r=n(0),i=n.n(r),a=n(27),c=n.n(a),d=(n(63),n(8)),s=n(49),u=n(31),l=n(4),p=n(10),f=n(12),m=n.n(f),h=n(19),g=n(17),b=n(14);function j(e,t){return Object(h.a)(m.a.mark((function n(){var o,r,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://fakeql.com/graphql/0bfe961b5d76d8f8ae63d882a1fadb8b",{method:"POST",body:JSON.stringify({query:e,variables:t})});case 2:return o=n.sent,n.next=5,o.json();case 5:if(!(r=n.sent).errors){n.next=9;break}throw i=r.errors[0].message,new Error(i);case 9:return n.abrupt("return",r.data);case 10:case"end":return n.stop()}}),n)})))}!function(e){e.Ceil="CEIL",e.Floor="FLOOR",e.Round="ROUND"}(o||(o={}));var y,x,v,w=function(e,t){return Object(d.useQuery)(void 0===e?["Todos"]:["Todos",e],j("\n    query Todos($page: Int, $limit: Int, $input: TodosWhere, $sort: String, $direction: String) {\n  todos(page: $page, limit: $limit, where: $input, sort: $sort, dir: $direction) {\n    id\n    task\n    done\n  }\n}\n    ",e),t)},O=n(20),T=n(2),I=l.a.div.withConfig({displayName:"SwipeToDelete__Wrapper",componentId:"sc-1nl5h0w-0"})(["position:relative;overflow:hidden;width:100%;"]),C=l.a.div.withConfig({displayName:"SwipeToDelete__BackgroundLayer",componentId:"sc-1nl5h0w-1"})(["position:absolute;z-index:0;width:100%;height:100%;display:flex;align-items:center;padding:0 1.5rem;color:white;background-color:#c70000;"," ",""],(function(e){return e.swipeDirection===O.LEFT&&"\n    justify-content: flex-end;\n  "}),(function(e){return e.swipeDirection===O.RIGHT&&"\n    justify-content: flex-start;\n  "})),_=l.a.div.withConfig({displayName:"SwipeToDelete__ForegroundLayer",componentId:"sc-1nl5h0w-2"})(["position:relative;z-index:1;height:100%;width:100%;background-color:#fff;display:flex;align-items:center;"]),S=function(e){var t=e.children,n=e.threshold,o=void 0===n?.3:n,i=e.onSwiped,a=e.onTap,c=Object(r.useRef)(null),d=Object(r.useRef)(null),s=Object(r.useState)(O.LEFT),u=Object(p.a)(s,2),l=u[0],f=u[1],m=Object(O.useSwipeable)({trackMouse:!1,preventDefaultTouchmoveEvent:!0,onTap:a,onSwipeStart:function(){c.current&&(c.current.style.transition="",c.current.style.transform="")},onSwiping:function(e){if(c.current){var t="translateX(".concat(e.deltaX,"px)");c.current.style.transform=t}if(d.current){var n=Math.min(Math.abs(e.deltaX)/100,1);d.current.style.opacity=n.toFixed(2)}f(e.dir)},onSwiped:function(e){if(c.current){var t=e.deltaX,n=c.current.offsetWidth;Math.abs(t)>=n*o?(t=e.dir===O.LEFT?2*-n:n,i&&i(e)):t=0,c.current.style.transition="transform 0.5s ease-out",c.current.style.transform="translateX(".concat(t,"px)")}}});return Object(T.jsxs)(I,{children:[Object(T.jsx)(C,{ref:d,swipeDirection:l,children:Object(T.jsx)(g.a,{icon:b.e,fixedWidth:!0})}),Object(T.jsx)(_,{onMouseDown:m.onMouseDown,ref:function(e){m.ref(e),c.current=e},children:t})]})},k=l.a.button.attrs({type:"button"}).withConfig({displayName:"ImageButton",componentId:"sc-yfcf41-0"})(["background-color:transparent;border:0;font-size:calc(max(2rem,20px));transition:0.3s all;opacity:0.4;&:enabled{cursor:pointer;}&:hover:enabled{opacity:1;}"]),P=l.a.li.withConfig({displayName:"TodoItem__ListItem",componentId:"sc-51iy91-0"})(["display:flex;background-color:#fff;border:none;border-bottom:0.1rem solid #ddd;min-height:5rem;&:last-child{border-bottom:none;}",""],(function(e){return e.done&&"\n    text-decoration: line-through;\n    color: #aaa;  \n    "})),M=l.a.div.withConfig({displayName:"TodoItem__Wrapper",componentId:"sc-51iy91-1"})(["display:flex;margin:1rem 0;min-height:2rem;"]),N=l.a.input.attrs({type:"checkbox"}).withConfig({displayName:"TodoItem__Checkbox",componentId:"sc-51iy91-2"})(["flex:1 0 auto;margin:0 1.5rem;height:2rem;width:2rem;"]),D=l.a.label.withConfig({displayName:"TodoItem__Label",componentId:"sc-51iy91-3"})(["margin-right:auto;display:flex;align-items:center;"]),F=l.a.div.withConfig({displayName:"TodoItem__OverlayWrapper",componentId:"sc-51iy91-4"})(["position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:flex-end;"]),A=Object(l.a)(k).withConfig({displayName:"TodoItem__DeleteButton",componentId:"sc-51iy91-5"})(["background-color:white;padding:0 1.5rem;height:100%;"]),L=function(e){var t,n=e.data,o=n.id,i=n.task,a=n.done,c=Object(d.useQueryClient)(),s=(t={onSuccess:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.invalidateQueries("Todos"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Object(d.useMutation)("updateTodo",(function(e){return j("\n    mutation updateTodo($id: ID!, $input: UpdateTodoInput!) {\n  updateTodo(id: $id, input: $input) {\n    id\n    task\n    done\n  }\n}\n    ",e)()}),t)),u=s.mutate,l=function(e){return Object(d.useMutation)("deleteTodo",(function(e){return j("\n    mutation deleteTodo($id: ID!) {\n  deleteTodo(id: $id)\n}\n    ",e)()}),e)}({onSuccess:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.invalidateQueries("Todos"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),f=l.mutate,y=Object(r.useState)(!1),x=Object(p.a)(y,2),v=x[0],w=x[1],O=function(e){var t=Object(r.useState)(!1),n=Object(p.a)(t,2),o=n[0],i=n[1];return Object(r.useEffect)((function(){var t=window.matchMedia(e);t.matches!==o&&i(t.matches);var n=function(){return i(t.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[o,e]),o}("(pointer: coarse)"),I=function(){u({id:o,input:{done:!a}})},C=function(){f({id:o})};return Object(T.jsx)(P,{done:a,onMouseEnter:function(){return!O&&w(!0)},onMouseLeave:function(){return!O&&w(!1)},children:Object(T.jsxs)(S,{onSwiped:C,onTap:I,children:[Object(T.jsx)(M,{children:Object(T.jsxs)(D,{htmlFor:o,children:[Object(T.jsx)(N,{id:o,checked:a,onChange:I}),i]})}),v&&Object(T.jsx)(F,{children:Object(T.jsx)(A,{onClick:C,"aria-label":"Delete Item",children:Object(T.jsx)(g.a,{icon:b.e})})})]})})},E=n(37),$=n(32);!function(e){e[e.TogglePage=0]="TogglePage",e[e.ToggleFilter=1]="ToggleFilter",e[e.ToggleMode=2]="ToggleMode",e[e.SearchItem=3]="SearchItem"}(y||(y={})),function(e){e.All="all",e.Active="active",e.Done="done"}(x||(x={})),function(e){e[e.Add=0]="Add",e[e.Search=1]="Search",e[e.None=2]="None"}(v||(v={}));var z=i.a.createContext(null),q=i.a.createContext(null);function W(e,t){switch(t.type){case y.TogglePage:return Object($.a)(e,(function(e){if(null==t.numericPayload)throw new Error("".concat(t.type,": payload not specified"));e.currentPage=t.numericPayload}));case y.ToggleFilter:return Object($.a)(e,(function(e){var n=t.stringPayload;if(null==n||!(n in x))throw new Error("".concat(t.type,": filter ").concat(n," not found"));e.filterMode=x[n],e.currentPage=1}));case y.ToggleMode:return Object($.a)(e,(function(e){var n=t.numericPayload;if(null==n||!(n in v))throw new Error("".concat(t.type,": input mode ").concat(n," not found"));e.inputMode!==n&&(e.inputMode=n,e.filterMode=x.All,e.currentPage=1)}));default:throw new Error("Unhandled action type")}}var Q,B=function(e){var t=e.children,n=e.reducer,o=void 0===n?W:n,r=i.a.useReducer(o,{currentPage:1,pageSize:5,hasMore:!1,filterMode:x.All,inputMode:v.Add,query:""}),a=Object(p.a)(r,2),c=a[0],d=a[1];return Object(T.jsx)(z.Provider,{value:c,children:Object(T.jsx)(q.Provider,{value:d,children:t})})};function R(){var e=i.a.useContext(z);if(null===e)throw new Error("useTodoState hook works in the context of a TodoProvider");return e}function X(){var e=i.a.useContext(q);if(null===e)throw new Error("useTodoDispatch hook works in the context of a TodoProvider ");return e}!function(e){e.Ascending="asc",e.Descending="desc"}(Q||(Q={}));var U,H=function(){var e,t=R(),n=t.currentPage,o=t.pageSize,r=t.filterMode,i=null;r===x.Active?i={done_eq:!1}:r===x.Done&&(i={done_eq:!0});var a={page:n,limit:o,input:i,sort:"id",direction:Q.Descending},c=w(a,{keepPreviousData:!0,staleTime:5e3}),d=c.data,s=c.isFetching,u=c.isPreviousData,l=w(Object(E.a)(Object(E.a)({},a),{},{page:n+1})).data;return{data:d,isFetching:s,isPreviousData:u,hasMoreData:null!=(null===l||void 0===l||null===(e=l.todos)||void 0===e?void 0:e.length)&&l.todos.length>0}},J=l.a.h1.withConfig({displayName:"Header__StyledHeader",componentId:"sc-jmby8c-0"})(["margin:0;padding-bottom:2rem;text-align:center;text-transform:uppercase;"]),G=function(){return Object(T.jsx)(J,{children:"Things to do"})},K=l.a.ul.withConfig({displayName:"Actions__ActionList",componentId:"sc-1a4n6g3-0"})(["flex:0 0 auto;list-style-type:none;border-right:0.1rem solid #ccc;margin-right:1.8rem;padding:0;"]),V=l.a.li.withConfig({displayName:"Actions__ActionItem",componentId:"sc-1a4n6g3-1"})(["display:inline;"]),Y=Object(l.a)(k).withConfig({displayName:"Actions__ActionButton",componentId:"sc-1a4n6g3-2"})(["margin:0 0.3rem;",""],(function(e){return e.active&&"opacity: 1;"})),Z=Object(l.a)(g.a).withConfig({displayName:"Actions__StyledFontAwesomeIcon",componentId:"sc-1a4n6g3-3"})(["font-size:2.7rem;"]),ee=function(){var e=R().inputMode,t=X(),n=function(e){t({type:y.ToggleMode,numericPayload:parseInt(e.currentTarget.value,10)})};return Object(T.jsxs)(K,{children:[Object(T.jsx)(V,{children:Object(T.jsx)(Y,{active:e===v.Add,value:v.Add,"aria-label":"Create Mode",onClick:n,children:Object(T.jsx)(Z,{icon:b.c,fixedWidth:!0})})}),Object(T.jsx)(V,{children:Object(T.jsx)(Y,{active:e===v.Search,value:v.Search,"aria-label":"Search Mode",onClick:n,children:Object(T.jsx)(Z,{icon:b.d,fixedWidth:!0})})})]})},te=l.a.ul.withConfig({displayName:"Filter__FilterList",componentId:"sc-160ur2e-0"})(["flex:0 0 auto;list-style-type:none;padding-left:0;"]),ne=l.a.li.withConfig({displayName:"Filter__FilterItem",componentId:"sc-160ur2e-1"})(["display:inline;margin:0.5rem;"]),oe=l.a.button.attrs({type:"button"}).withConfig({displayName:"Filter__Button",componentId:"sc-160ur2e-2"})(["font-size:1.8rem;text-transform:capitalize;background-color:transparent;color:inherit;padding:0.3rem 0.7rem;text-decoration:none;border:0.1rem solid transparent;border-radius:0.3rem;&:hover{border-color:rgba(175,47,47,0.1);}",""],(function(e){return e.active&&"\n    border-color: rgba(175, 47, 47, 0.2);\n  "})),re=function(){var e=R().filterMode,t=X();return Object(T.jsx)(te,{children:Object.entries(x).map((function(n){var o=Object(p.a)(n,2),r=o[0],i=o[1];return Object(T.jsx)(ne,{children:Object(T.jsx)(oe,{active:i===e,onClick:function(){return function(e){t({type:y.ToggleFilter,stringPayload:e})}(r)},children:i})},r)}))})},ie=l.a.div.withConfig({displayName:"Pagination__Wrapper",componentId:"sc-odef2i-0"})(["display:flex;align-items:center;margin-right:auto;"]),ae=l.a.ul.withConfig({displayName:"Pagination__PaginationList",componentId:"sc-odef2i-1"})(["margin-right:auto;list-style-type:none;padding:0;"]),ce=l.a.li.withConfig({displayName:"Pagination__PaginationItem",componentId:"sc-odef2i-2"})(["display:inline;"]),de=Object(l.a)(g.a).withConfig({displayName:"Pagination__StyledFontAwesomeIcon",componentId:"sc-odef2i-3"})(["font-size:2.7rem;"]),se=function(){var e=R().currentPage,t=X(),n=H(),o=n.isPreviousData,r=n.hasMoreData;return Object(T.jsxs)(ie,{children:["Current page: ",e,Object(T.jsxs)(ae,{children:[Object(T.jsx)(ce,{children:Object(T.jsx)(k,{"aria-label":"Previous Page",onClick:function(){return t({type:y.TogglePage,numericPayload:Math.max(e-1,1)})},disabled:1===e,children:Object(T.jsx)(de,{icon:b.a,fixedWidth:!0})})}),Object(T.jsx)(ce,{children:Object(T.jsx)(k,{"aria-label":"Next Page",onClick:function(){return t({type:y.TogglePage,numericPayload:r?e+1:e})},disabled:o||!r,children:Object(T.jsx)(de,{icon:b.b,fixedWidth:!0})})})]})]})},ue=l.a.div.withConfig({displayName:"Footer__StyledFooter",componentId:"sc-1a3cbzi-0"})(["display:flex;flex-wrap:wrap;align-items:center;border-top:0.1rem solid #ddd;background-color:#f4fce8;margin:0 -2rem -1rem -2rem;padding:0 2rem;color:#707070;"]),le=function(){return Object(T.jsxs)(ue,{children:[Object(T.jsx)(ee,{}),Object(T.jsx)(se,{}),Object(T.jsx)(re,{})]})},pe=l.a.input.attrs({type:"text"}).withConfig({displayName:"InputBox__StyledInput",componentId:"sc-26uffi-0"})(["display:block;width:100%;height:4rem;padding:0.6rem 1.2rem;font-size:1.6rem;color:#555;background-color:#fff;border:1px solid #ccc;"]),fe=function(){var e,t=Object(r.useState)(""),n=Object(p.a)(t,2),o=n[0],i=n[1],a=X(),c=Object(d.useQueryClient)(),s=(e={onSuccess:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.invalidateQueries("Todos"),i(""),a({type:y.TogglePage,numericPayload:1});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Object(d.useMutation)("createTodo",(function(e){return j("\n    mutation createTodo($input: CreateTodoInput!) {\n  createTodo(input: $input) {\n    id\n    task\n    done\n  }\n}\n    ",e)()}),e)),u=s.mutate;return Object(T.jsx)(pe,{placeholder:"Add New",value:o,onChange:function(e){return i(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&u({input:{task:o.trim(),done:!1,user_id:"1"}})}})},me=function(){var e=R().query,t=X();return Object(T.jsx)(pe,{placeholder:"Search",value:e,onChange:function(e){var n=e.target.value;t({type:y.SearchItem,stringPayload:n})}})},he=function(){switch(R().inputMode){case v.Add:return Object(T.jsx)(fe,{});case v.Search:return Object(T.jsx)(me,{});default:return null}},ge=l.a.section.withConfig({displayName:"TodoList__Section",componentId:"sc-1pak9km-0"})(["background-color:#fff;padding:2rem 2rem 1rem 2rem;border:0.1rem solid #ddd;border-radius:0.2rem;margin:3rem auto;min-width:32rem;max-width:60rem;position:relative;"]),be=l.a.ul.withConfig({displayName:"TodoList__StyledList",componentId:"sc-1pak9km-1"})(["list-style-type:none;padding-left:0;margin-bottom:0;"]),je=function(){var e,t=H().data;return Object(T.jsxs)(ge,{children:[Object(T.jsx)(G,{}),Object(T.jsx)(he,{}),Object(T.jsx)(be,{children:null===t||void 0===t||null===(e=t.todos)||void 0===e?void 0:e.map((function(e){return e&&Object(T.jsx)(L,{data:e},e.id)}))}),Object(T.jsx)(le,{})]})},ye=new d.QueryClient({queryCache:new d.QueryCache({onError:function(e){return u.b.error("Something went wrong: ".concat(e.message))}})}),xe=function(){return Object(T.jsxs)(d.QueryClientProvider,{client:ye,children:[Object(T.jsx)(B,{children:Object(T.jsx)(je,{})}),Object(T.jsx)(u.a,{}),Object(T.jsx)(s.ReactQueryDevtools,{initialIsOpen:!0})]})};c.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(xe,{})}),document.getElementById("root")),U&&U instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(e){var t=e.getCLS,n=e.getFID,o=e.getFCP,r=e.getLCP,i=e.getTTFB;t(U),n(U),o(U),r(U),i(U)}))}},[[73,1,2]]]);
//# sourceMappingURL=main.c1febe85.chunk.js.map