(this["webpackJsonptodo-app-ts-styled-components-graphql"]=this["webpackJsonptodo-app-ts-styled-components-graphql"]||[]).push([[0],{67:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r,o=n(0),i=n.n(o),a=n(29),c=n.n(a),s=(n(67),n(8)),d=n(49),u=n(33),l=n(4),p=n(11),f=n.n(p),m=n(19),h=n(16),g=n(13),b=n(53);function j(e,t){return Object(m.a)(f.a.mark((function n(){var r,o,i;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://fakeql.com/graphql/0bfe961b5d76d8f8ae63d882a1fadb8b",{method:"POST",body:JSON.stringify({query:e,variables:t})});case 2:return r=n.sent,n.next=5,r.json();case 5:if(!(o=n.sent).errors){n.next=9;break}throw i=o.errors[0].message,new Error(i);case 9:return n.abrupt("return",o.data);case 10:case"end":return n.stop()}}),n)})))}!function(e){e.Ceil="CEIL",e.Floor="FLOOR",e.Round="ROUND"}(r||(r={}));var y,w,x=function(e,t){return Object(s.useQuery)(void 0===e?["Todos"]:["Todos",e],j("\n    query Todos($page: Int, $limit: Int, $input: TodosWhere, $sort: String, $direction: String) {\n  todos(page: $page, limit: $limit, where: $input, sort: $sort, dir: $direction) {\n    id\n    task\n    done\n  }\n}\n    ",e),t)},O=n(17),v=n(21),I=n(2),k=l.a.div.withConfig({displayName:"SwipeToDelete__Wrapper",componentId:"sc-1nl5h0w-0"})(["position:relative;overflow:hidden;width:100%;"]),C=l.a.div.withConfig({displayName:"SwipeToDelete__BackgroundLayer",componentId:"sc-1nl5h0w-1"})(["position:absolute;z-index:0;width:100%;height:100%;display:flex;align-items:center;padding:0 1.5rem;color:white;background-color:#c70000;"," ",""],(function(e){return e.swipeDirection===v.LEFT&&"\n    justify-content: flex-end;\n  "}),(function(e){return e.swipeDirection===v.RIGHT&&"\n    justify-content: flex-start;\n  "})),_=l.a.div.withConfig({displayName:"SwipeToDelete__ForegroundLayer",componentId:"sc-1nl5h0w-2"})(["position:relative;z-index:1;height:100%;width:100%;background-color:#fff;display:flex;align-items:center;"]),T=function(e){var t=e.children,n=e.threshold,r=void 0===n?.3:n,i=e.onSwiped,a=e.onTap,c=Object(o.useRef)(null),s=Object(o.useRef)(null),d=Object(o.useState)(v.LEFT),u=Object(O.a)(d,2),l=u[0],p=u[1],f=Object(v.useSwipeable)({trackMouse:!1,preventDefaultTouchmoveEvent:!0,onTap:a,onSwipeStart:function(){c.current&&(c.current.style.transition="",c.current.style.transform="")},onSwiping:function(e){if(c.current){var t="translateX(".concat(e.deltaX,"px)");c.current.style.transform=t}if(s.current){var n=Math.min(Math.abs(e.deltaX)/100,1);s.current.style.opacity=n.toFixed(2)}p(e.dir)},onSwiped:function(e){if(c.current){var t=e.deltaX,n=c.current.offsetWidth;Math.abs(t)>=n*r?(t=e.dir===v.LEFT?2*-n:n,i&&i(e)):t=0,c.current.style.transition="transform 0.5s ease-out",c.current.style.transform="translateX(".concat(t,"px)")}}});return Object(I.jsxs)(k,{children:[Object(I.jsx)(C,{ref:s,swipeDirection:l,children:Object(I.jsx)(h.a,{icon:g.e,fixedWidth:!0})}),Object(I.jsx)(_,{onMouseDown:f.onMouseDown,ref:function(e){f.ref(e),c.current=e},children:t})]})},S=l.a.button.attrs({type:"button"}).withConfig({displayName:"ImageButton",componentId:"sc-yfcf41-0"})(["background-color:transparent;border:0;font-size:calc(max(2rem,20px));transition:0.3s all;opacity:0.4;&:enabled{cursor:pointer;}&:hover:enabled{opacity:1;}"]),N=l.a.li.withConfig({displayName:"TodoItem__ListItem",componentId:"sc-51iy91-0"})(["position:relative;display:flex;background-color:#fff;border:none;border-bottom:0.1rem solid #ddd;min-height:5rem;&:last-child{border-bottom:none;}",""],(function(e){return e.done&&"\n    text-decoration: line-through;\n    color: #aaa;  \n    "})),M=l.a.div.withConfig({displayName:"TodoItem__Wrapper",componentId:"sc-51iy91-1"})(["display:flex;flex:1 1 100%;"]),F=l.a.input.attrs({type:"checkbox"}).withConfig({displayName:"TodoItem__Checkbox",componentId:"sc-51iy91-2"})(["flex:0 0 auto;margin:0 1.5rem;height:2rem;width:2rem;"]),D=l.a.label.withConfig({displayName:"TodoItem__Label",componentId:"sc-51iy91-3"})(["display:flex;align-items:center;flex:1 1 100%;padding:0.8rem 0;"]),L=Object(l.a)(S).withConfig({displayName:"TodoItem__DeleteButton",componentId:"sc-51iy91-4"})(["padding:0 1.5rem;"]),P=function(e){var t,n=e.data,r=n.id,o=n.task,i=n.done,a=Object(s.useQueryClient)(),c=(t={onSuccess:function(){var e=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.invalidateQueries("Todos"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Object(s.useMutation)("updateTodo",(function(e){return j("\n    mutation updateTodo($id: ID!, $input: UpdateTodoInput!) {\n  updateTodo(id: $id, input: $input) {\n    id\n    task\n    done\n  }\n}\n    ",e)()}),t)),d=c.mutate,u=function(e){return Object(s.useMutation)("deleteTodo",(function(e){return j("\n    mutation deleteTodo($id: ID!) {\n  deleteTodo(id: $id)\n}\n    ",e)()}),e)}({onSuccess:function(){var e=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.invalidateQueries("Todos"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),l=u.mutate,p=Object(b.a)("(pointer: coarse)"),y=function(){d({id:r,input:{done:!i}})},w=function(){l({id:r})},x=Object(I.jsx)(M,{children:Object(I.jsxs)(D,{htmlFor:r,children:[Object(I.jsx)(F,{id:r,checked:i,onChange:y}),o]})});return p?Object(I.jsx)(N,{done:i,children:Object(I.jsx)(T,{onSwiped:w,onTap:y,children:x})}):Object(I.jsxs)(N,{done:i,children:[x,Object(I.jsx)(L,{onClick:w,"aria-label":"Delete Item",children:Object(I.jsx)(h.a,{icon:g.e})})]})},A=n(20),E=n(54),$=n(81),Q=n(56),R=n.n(Q),q=n(55),z=n(24);!function(e){e.All="all",e.Active="active",e.Done="done"}(y||(y={})),function(e){e[e.Add=0]="Add",e[e.Search=1]="Search",e[e.None=2]="None"}(w||(w={}));var K,W=Object($.a)((function(e){return{page:1,togglePage:function(t){e((function(){return{page:t}}))},filterMode:y.All,toggleFilterMode:function(t){e((function(){return{filterMode:t,page:1}}))},inputMode:w.Add,toggleInputMode:function(t){e((function(){return{inputMode:t,filterMode:y.All,page:1}}))},query:"",updateQuery:function(t){e((function(){return{query:t}}))}}}),(function(e){return function(t,n,r){return e((function(e){return t(Object(z.a)(e))}),n,r)}}),(function(e){return Object(q.persist)(e,{name:"todo-storage",getStorage:function(){return sessionStorage}})}),(function(e){return R()(e)}),E.a);!function(e){e.Ascending="asc",e.Descending="desc"}(K||(K={}));var B,U=function(){var e,t=W.usePage(),n=W.useFilterMode(),r=W.useInputMode(),o=W.useQuery(),i=null;n===y.Active?i={done_eq:!1}:n===y.Done&&(i={done_eq:!0}),""!==o&&r===w.Search&&(i=Object(A.a)(Object(A.a)({},i),{},{task_contains:o}));var a={page:t,limit:5,input:i,sort:"id",direction:K.Descending},c=x(a,{keepPreviousData:!0,staleTime:5e3}),s=c.data,d=c.isFetching,u=c.isPreviousData,l=x(Object(A.a)(Object(A.a)({},a),{},{page:t+1})).data;return{data:s,isFetching:d,isPreviousData:u,hasMoreData:null!=(null===l||void 0===l||null===(e=l.todos)||void 0===e?void 0:e.length)&&l.todos.length>0}},X=l.a.h1.withConfig({displayName:"Header__StyledHeader",componentId:"sc-jmby8c-0"})(["margin:0;padding-bottom:2rem;text-align:center;text-transform:uppercase;"]),H=function(){return Object(I.jsx)(X,{children:"Things to do"})},J=l.a.ul.withConfig({displayName:"Actions__ActionList",componentId:"sc-1a4n6g3-0"})(["flex:0 0 auto;list-style-type:none;border-right:0.1rem solid #ccc;margin-right:1.8rem;padding:0;"]),G=l.a.li.withConfig({displayName:"Actions__ActionItem",componentId:"sc-1a4n6g3-1"})(["display:inline;"]),V=Object(l.a)(S).withConfig({displayName:"Actions__ActionButton",componentId:"sc-1a4n6g3-2"})(["margin:0 0.3rem;",""],(function(e){return e.active&&"opacity: 1;"})),Y=Object(l.a)(h.a).withConfig({displayName:"Actions__StyledFontAwesomeIcon",componentId:"sc-1a4n6g3-3"})(["font-size:2.7rem;"]),Z=function(){var e=W.useInputMode(),t=W.useToggleInputMode();return Object(I.jsxs)(J,{children:[Object(I.jsx)(G,{children:Object(I.jsx)(V,{active:e===w.Add,value:w.Add,"aria-label":"Create Mode",onClick:function(){return t(w.Add)},children:Object(I.jsx)(Y,{icon:g.c,fixedWidth:!0})})}),Object(I.jsx)(G,{children:Object(I.jsx)(V,{active:e===w.Search,value:w.Search,"aria-label":"Search Mode",onClick:function(){return t(w.Search)},children:Object(I.jsx)(Y,{icon:g.d,fixedWidth:!0})})})]})},ee=l.a.ul.withConfig({displayName:"Filter__FilterList",componentId:"sc-160ur2e-0"})(["flex:0 0 auto;list-style-type:none;padding-left:0;"]),te=l.a.li.withConfig({displayName:"Filter__FilterItem",componentId:"sc-160ur2e-1"})(["display:inline;margin:0.5rem;"]),ne=l.a.button.attrs({type:"button"}).withConfig({displayName:"Filter__Button",componentId:"sc-160ur2e-2"})(["font-size:1.8rem;text-transform:capitalize;background-color:transparent;color:inherit;padding:0.3rem 0.7rem;text-decoration:none;border:0.1rem solid transparent;border-radius:0.3rem;&:hover{border-color:rgba(175,47,47,0.1);}",""],(function(e){return e.active&&"\n    border-color: rgba(175, 47, 47, 0.2);\n  "})),re=function(){var e=W.useFilterMode(),t=W.useToggleFilterMode();return Object(I.jsx)(ee,{children:Object.entries(y).map((function(n){var r=Object(O.a)(n,2),o=r[0],i=r[1];return Object(I.jsx)(te,{children:Object(I.jsx)(ne,{active:i===e,onClick:function(){return t(i)},children:i})},o)}))})},oe=l.a.div.withConfig({displayName:"Pagination__Wrapper",componentId:"sc-odef2i-0"})(["display:flex;align-items:center;margin-right:auto;"]),ie=l.a.ul.withConfig({displayName:"Pagination__PaginationList",componentId:"sc-odef2i-1"})(["margin-right:auto;list-style-type:none;padding:0;"]),ae=l.a.li.withConfig({displayName:"Pagination__PaginationItem",componentId:"sc-odef2i-2"})(["display:inline;"]),ce=Object(l.a)(h.a).withConfig({displayName:"Pagination__StyledFontAwesomeIcon",componentId:"sc-odef2i-3"})(["font-size:2.7rem;"]),se=function(){var e=W.usePage(),t=W.useTogglePage(),n=U(),r=n.isPreviousData,o=n.hasMoreData;return Object(I.jsxs)(oe,{children:["Current page: ",e,Object(I.jsxs)(ie,{children:[Object(I.jsx)(ae,{children:Object(I.jsx)(S,{"aria-label":"Previous Page",onClick:function(){return t(Math.max(e-1,1))},disabled:1===e,children:Object(I.jsx)(ce,{icon:g.a,fixedWidth:!0})})}),Object(I.jsx)(ae,{children:Object(I.jsx)(S,{"aria-label":"Next Page",onClick:function(){return t(o?e+1:e)},disabled:r||!o,children:Object(I.jsx)(ce,{icon:g.b,fixedWidth:!0})})})]})]})},de=l.a.div.withConfig({displayName:"Footer__StyledFooter",componentId:"sc-1a3cbzi-0"})(["display:flex;flex-wrap:wrap;align-items:center;border-top:0.1rem solid #ddd;background-color:#f4fce8;margin:0 -2rem -1rem -2rem;padding:0 2rem;color:#707070;"]),ue=function(){return Object(I.jsxs)(de,{children:[Object(I.jsx)(Z,{}),Object(I.jsx)(se,{}),Object(I.jsx)(re,{})]})},le=l.a.input.attrs({type:"text"}).withConfig({displayName:"InputBox__StyledInput",componentId:"sc-26uffi-0"})(["display:block;width:100%;height:4rem;padding:0.6rem 1.2rem;font-size:1.6rem;color:#555;background-color:#fff;border:1px solid #ccc;"]),pe=function(){var e,t=W.useQuery(),n=W.useUpdateQuery(),r=W.useTogglePage(),o=Object(s.useQueryClient)(),i=(e={onSuccess:function(){var e=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.invalidateQueries("Todos"),n(""),r(1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Object(s.useMutation)("createTodo",(function(e){return j("\n    mutation createTodo($input: CreateTodoInput!) {\n  createTodo(input: $input) {\n    id\n    task\n    done\n  }\n}\n    ",e)()}),e)),a=i.mutate;return Object(I.jsx)(le,{placeholder:"Add New",value:t,onChange:function(e){return n(e.target.value)},onKeyUp:function(e){if("Enter"===e.code){var n=t.trim();""!==n&&a({input:{task:n,done:!1,user_id:"1"}})}}})},fe=function(){var e=W.useQuery(),t=W.useUpdateQuery();return Object(I.jsx)(le,{placeholder:"Search",value:e,onChange:function(e){var n=e.target.value;t(n)}})},me=function(){switch(W.useInputMode()){case w.Add:return Object(I.jsx)(pe,{});case w.Search:return Object(I.jsx)(fe,{});default:return null}},he=l.a.p.withConfig({displayName:"InfoPanel__Paragraph",componentId:"sc-a4h1dh-0"})(["position:absolute;font-size:1.44rem;margin-top:2rem;left:0;right:0;color:#6b6b6b;text-align:center;"]),ge=function(){var e=W.useInputMode()===w.None?"Press `Shift + S` to search and `Shift + A` to create a new item.":"Press `Esc` to cancel.";return Object(I.jsx)(he,{children:e})};!function(e){e[e.Keydown=0]="Keydown",e[e.Keyup=1]="Keyup",e[e.Reset=2]="Reset"}(B||(B={}));var be,je=["input","textarea"],ye=function(e,t){switch(t.type){case B.Keydown:return Object(z.a)(e,(function(e){if(null==t.key)throw new Error("".concat(t.type,": missing key"));e[t.key]=!0}));case B.Keyup:return Object(z.a)(e,(function(e){if(null==t.key)throw new Error("".concat(t.type,": missing key"));e[t.key]=!1}));case B.Reset:if(null==t.payload)throw new Error("".concat(t.type,": missing payload"));return Object(A.a)({},t.payload);default:return e}},we=function(e,t){if(!e.length)throw new Error("The first parameter to `useHotkey` must contain at least one `KeyboardEvent.key` string.");var n=e.map((function(e){return e.toLowerCase()})),r=n.reduce((function(e,t){return e[t]=!1,e}),{}),i=Object(o.useReducer)(ye,r),a=Object(O.a)(i,2),c=a[0],s=a[1],d=Object(o.useCallback)((function(e){var t=e.key,r=e.target,o=e.repeat,i=t.toLowerCase();o||je.includes(r.tagName.toLowerCase())||!n.includes(i)||c[i]||s({type:B.Keydown,key:i})}),[c,n]),u=Object(o.useCallback)((function(e){var t=e.key,r=e.target,o=t.toLowerCase();!je.includes(r.tagName.toLowerCase())&&n.includes(o)&&c[o]&&s({type:B.Keyup,key:o})}),[c,n]);Object(o.useEffect)((function(){Object.values(c).every((function(e){return e}))&&(t(c),s({type:B.Reset,payload:r}))}),[t,c,r]),Object(o.useEffect)((function(){return window.addEventListener("keydown",d,!0),function(){return window.removeEventListener("keydown",d,!0)}}),[d]),Object(o.useEffect)((function(){return window.addEventListener("keyup",u,!0),function(){return window.removeEventListener("keyup",u,!0)}}),[u])},xe="shift",Oe=l.a.section.withConfig({displayName:"TodoList__Section",componentId:"sc-1pak9km-0"})(["position:relative;background-color:#fff;padding:2rem 2rem 1rem 2rem;border:0.1rem solid #ddd;border-radius:0.2rem;margin:3rem auto;min-width:32rem;max-width:60rem;"]),ve=l.a.ul.withConfig({displayName:"TodoList__StyledList",componentId:"sc-1pak9km-1"})(["list-style-type:none;padding-left:0;"]),Ie=function(){var e,t=U().data;return function(){var e=W.useToggleInputMode(),t=[xe,"s"],n=["escape"];we([xe,"a"],(function(){return e(w.Add)})),we(t,(function(){return e(w.Search)})),we(n,(function(){return e(w.None)}))}(),Object(I.jsxs)(Oe,{children:[Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(H,{}),Object(I.jsx)(me,{}),Object(I.jsx)(ve,{children:null===t||void 0===t||null===(e=t.todos)||void 0===e?void 0:e.map((function(e){return e&&Object(I.jsx)(P,{data:e},e.id)}))}),Object(I.jsx)(ue,{})]}),Object(I.jsx)(ge,{})]})},ke=new s.QueryClient({queryCache:new s.QueryCache({onError:function(e){return u.b.error("Something went wrong: ".concat(e.message))}})}),Ce=function(){return Object(I.jsxs)(s.QueryClientProvider,{client:ke,children:[Object(I.jsx)(Ie,{}),Object(I.jsx)(u.a,{}),Object(I.jsx)(d.ReactQueryDevtools,{initialIsOpen:!0})]})};c.a.render(Object(I.jsx)(i.a.StrictMode,{children:Object(I.jsx)(Ce,{})}),document.getElementById("root")),be&&be instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(e){var t=e.getCLS,n=e.getFID,r=e.getFCP,o=e.getLCP,i=e.getTTFB;t(be),n(be),r(be),o(be),i(be)}))}},[[77,1,2]]]);
//# sourceMappingURL=main.1b097307.chunk.js.map