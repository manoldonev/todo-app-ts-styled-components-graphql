(this["webpackJsonptodo-app-ts-styled-components-graphql"]=this["webpackJsonptodo-app-ts-styled-components-graphql"]||[]).push([[0],{62:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r,o=n(0),i=n.n(o),a=n(26),c=n.n(a),d=(n(62),n(8)),s=n(48),u=n(30),l=n(6),p=n(11),g=n.n(p),f=n(18),m=n(15),h=n(16);function b(e,t){return Object(f.a)(g.a.mark((function n(){var r,o,i;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://fakeql.com/graphql/0bfe961b5d76d8f8ae63d882a1fadb8b",{method:"POST",body:JSON.stringify({query:e,variables:t})});case 2:return r=n.sent,n.next=5,r.json();case 5:if(!(o=n.sent).errors){n.next=9;break}throw i=o.errors[0].message,new Error(i);case 9:return n.abrupt("return",o.data);case 10:case"end":return n.stop()}}),n)})))}!function(e){e.Ceil="CEIL",e.Floor="FLOOR",e.Round="ROUND"}(r||(r={}));var j,y,x,O=function(e,t){return Object(d.useQuery)(void 0===e?["Todos"]:["Todos",e],b("\n    query Todos($page: Int, $limit: Int, $input: TodosWhere, $sort: String, $direction: String) {\n  todos(page: $page, limit: $limit, where: $input, sort: $sort, dir: $direction) {\n    id\n    task\n    done\n  }\n}\n    ",e),t)},v=l.a.button.attrs({type:"button"}).withConfig({displayName:"ImageButton",componentId:"sc-yfcf41-0"})(["background-color:transparent;border:0;font-size:calc(max(2rem,20px));transition:0.3s all;opacity:0.4;&:enabled{cursor:pointer;}&:hover:enabled{opacity:1;}"]),w=n(2),T=l.a.li.withConfig({displayName:"TodoItem__ListItem",componentId:"sc-51iy91-0"})(["background-color:#fff;border:none;border-bottom:0.1rem solid #ddd;&:last-child{border-bottom:none;}",""],(function(e){return e.done&&"\n    text-decoration: line-through;\n    color: #aaa;  \n    "})),C=l.a.div.withConfig({displayName:"TodoItem__Wrapper",componentId:"sc-51iy91-1"})(["display:flex;margin:1rem 0;min-height:2rem;"]),I=l.a.input.attrs({type:"checkbox"}).withConfig({displayName:"TodoItem__Checkbox",componentId:"sc-51iy91-2"})(["margin-right:0.4rem;"]),k=function(e){var t,n=e.data,r=n.id,o=n.task,i=n.done,a=Object(d.useQueryClient)(),c=(t={onSuccess:function(){var e=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.invalidateQueries("Todos"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Object(d.useMutation)("updateTodo",(function(e){return b("\n    mutation updateTodo($id: ID!, $input: UpdateTodoInput!) {\n  updateTodo(id: $id, input: $input) {\n    id\n    task\n    done\n  }\n}\n    ",e)()}),t)),s=c.mutate,u=function(e){return Object(d.useMutation)("deleteTodo",(function(e){return b("\n    mutation deleteTodo($id: ID!) {\n  deleteTodo(id: $id)\n}\n    ",e)()}),e)}({onSuccess:function(){var e=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.invalidateQueries("Todos"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),l=u.mutate;return Object(w.jsx)(T,{done:i,children:Object(w.jsxs)(C,{children:[Object(w.jsxs)("label",{style:{marginRight:"auto"},htmlFor:r,children:[Object(w.jsx)(I,{id:r,checked:i,onChange:function(){s({id:r,input:{done:!i}})}}),o]}),Object(w.jsx)(v,{onClick:function(){l({id:r})},"aria-label":"Delete Item",children:Object(w.jsx)(m.a,{icon:h.e})})]})})},P=n(36),_=n(19),S=n(31);!function(e){e[e.TogglePage=0]="TogglePage",e[e.ToggleFilter=1]="ToggleFilter",e[e.ToggleMode=2]="ToggleMode",e[e.SearchItem=3]="SearchItem"}(j||(j={})),function(e){e.All="all",e.Active="active",e.Done="done"}(y||(y={})),function(e){e[e.Add=0]="Add",e[e.Search=1]="Search",e[e.None=2]="None"}(x||(x={}));var M=i.a.createContext(null),N=i.a.createContext(null);function F(e,t){switch(t.type){case j.TogglePage:return Object(S.a)(e,(function(e){if(null==t.numericPayload)throw new Error("".concat(t.type,": payload not specified"));e.currentPage=t.numericPayload}));case j.ToggleFilter:return Object(S.a)(e,(function(e){var n=t.stringPayload;if(null==n||!(n in y))throw new Error("".concat(t.type,": filter ").concat(n," not found"));e.filterMode=y[n],e.currentPage=1}));case j.ToggleMode:return Object(S.a)(e,(function(e){var n=t.numericPayload;if(null==n||!(n in x))throw new Error("".concat(t.type,": input mode ").concat(n," not found"));e.inputMode!==n&&(e.inputMode=n,e.filterMode=y.All,e.currentPage=1)}));default:throw new Error("Unhandled action type")}}var A,$=function(e){var t=e.children,n=e.reducer,r=void 0===n?F:n,o=i.a.useReducer(r,{currentPage:1,pageSize:5,hasMore:!1,filterMode:y.All,inputMode:x.Add,query:""}),a=Object(_.a)(o,2),c=a[0],d=a[1];return Object(w.jsx)(M.Provider,{value:c,children:Object(w.jsx)(N.Provider,{value:d,children:t})})};function D(){var e=i.a.useContext(M);if(null===e)throw new Error("useTodoState hook works in the context of a TodoProvider");return e}function q(){var e=i.a.useContext(N);if(null===e)throw new Error("useTodoDispatch hook works in the context of a TodoProvider ");return e}!function(e){e.Ascending="asc",e.Descending="desc"}(A||(A={}));var E,L=function(){var e,t=D(),n=t.currentPage,r=t.pageSize,o=t.filterMode,i=null;o===y.Active?i={done_eq:!1}:o===y.Done&&(i={done_eq:!0});var a={page:n,limit:r,input:i,sort:"id",direction:A.Descending},c=O(a,{keepPreviousData:!0,staleTime:5e3}),d=c.data,s=c.isFetching,u=c.isPreviousData,l=O(Object(P.a)(Object(P.a)({},a),{},{page:n+1})).data;return{data:d,isFetching:s,isPreviousData:u,hasMoreData:null!=(null===l||void 0===l||null===(e=l.todos)||void 0===e?void 0:e.length)&&l.todos.length>0}},Q=l.a.h1.withConfig({displayName:"Header__StyledHeader",componentId:"sc-jmby8c-0"})(["margin:0;padding-bottom:2rem;text-align:center;text-transform:uppercase;"]),z=function(){return Object(w.jsx)(Q,{children:"Things to do"})},B=l.a.ul.withConfig({displayName:"Actions__ActionList",componentId:"sc-1a4n6g3-0"})(["flex:0 0 auto;list-style-type:none;border-right:0.1rem solid #ccc;margin-right:1.8rem;padding:0;"]),R=l.a.li.withConfig({displayName:"Actions__ActionItem",componentId:"sc-1a4n6g3-1"})(["display:inline;"]),W=Object(l.a)(v).withConfig({displayName:"Actions__ActionButton",componentId:"sc-1a4n6g3-2"})(["margin:0 0.8rem 0 0;",""],(function(e){return e.active&&"opacity: 1;"})),U=function(){var e=D().inputMode,t=q(),n=function(e){t({type:j.ToggleMode,numericPayload:parseInt(e.currentTarget.value,10)})};return Object(w.jsxs)(B,{children:[Object(w.jsx)(R,{children:Object(w.jsx)(W,{active:e===x.Add,value:x.Add,"aria-label":"Create Mode",onClick:n,children:Object(w.jsx)(m.a,{icon:h.c,fixedWidth:!0})})}),Object(w.jsx)(R,{children:Object(w.jsx)(W,{active:e===x.Search,value:x.Search,"aria-label":"Search Mode",onClick:n,children:Object(w.jsx)(m.a,{icon:h.d,fixedWidth:!0})})})]})},J=l.a.ul.withConfig({displayName:"Filter__FilterList",componentId:"sc-160ur2e-0"})(["flex:0 0 auto;list-style-type:none;padding-left:0;"]),H=l.a.li.withConfig({displayName:"Filter__FilterItem",componentId:"sc-160ur2e-1"})(["display:inline;"]),K=l.a.button.attrs({type:"button"}).withConfig({displayName:"Filter__Button",componentId:"sc-160ur2e-2"})(["text-transform:capitalize;background-color:transparent;color:inherit;margin:0.3rem;padding:0.3rem 0.7rem;text-decoration:none;border:0.1rem solid transparent;border-radius:0.3rem;&:hover{border-color:rgba(175,47,47,0.1);}",""],(function(e){return e.active&&"\n    border-color: rgba(175, 47, 47, 0.2);\n  "})),G=function(){var e=D().filterMode,t=q();return Object(w.jsx)(J,{children:Object.entries(y).map((function(n){var r=Object(_.a)(n,2),o=r[0],i=r[1];return Object(w.jsx)(H,{children:Object(w.jsx)(K,{active:i===e,onClick:function(){return function(e){t({type:j.ToggleFilter,stringPayload:e})}(o)},children:i})},o)}))})},V=l.a.ul.withConfig({displayName:"Pagination__PaginationList",componentId:"sc-odef2i-0"})(["margin-right:auto;list-style-type:none;padding:0;"]),X=l.a.li.withConfig({displayName:"Pagination__PaginationItem",componentId:"sc-odef2i-1"})(["display:inline;"]),Y=function(){var e=D().currentPage,t=q(),n=L(),r=n.isPreviousData,o=n.hasMoreData;return Object(w.jsxs)(w.Fragment,{children:["Current page: ",e,Object(w.jsxs)(V,{children:[Object(w.jsx)(X,{children:Object(w.jsx)(v,{onClick:function(){return t({type:j.TogglePage,numericPayload:Math.max(e-1,1)})},disabled:1===e,children:Object(w.jsx)(m.a,{icon:h.a,fixedWidth:!0})})}),Object(w.jsx)(X,{children:Object(w.jsx)(v,{onClick:function(){return t({type:j.TogglePage,numericPayload:o?e+1:e})},disabled:r||!o,children:Object(w.jsx)(m.a,{icon:h.b,fixedWidth:!0})})})]})]})},Z=l.a.div.withConfig({displayName:"Footer__StyledFooter",componentId:"sc-1a3cbzi-0"})(["display:flex;flex-wrap:wrap;align-items:baseline;border-top:0.1rem solid #ddd;background-color:#f4fce8;margin:0 -2rem -1rem -2rem;padding:0 2rem;color:#707070;"]),ee=function(){return Object(w.jsxs)(Z,{children:[Object(w.jsx)(U,{}),Object(w.jsx)(Y,{}),Object(w.jsx)(G,{})]})},te=l.a.input.attrs({type:"text"}).withConfig({displayName:"InputBox__StyledInput",componentId:"sc-26uffi-0"})(["display:block;width:100%;height:3.4rem;padding:0.6rem 1.2rem;font-size:1.4rem;line-height:1.42857143;color:#555;background-color:#fff;border:1px solid #ccc;"]),ne=function(){var e,t=Object(o.useState)(""),n=Object(_.a)(t,2),r=n[0],i=n[1],a=q(),c=Object(d.useQueryClient)(),s=(e={onSuccess:function(){var e=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.invalidateQueries("Todos"),i(""),a({type:j.TogglePage,numericPayload:1});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Object(d.useMutation)("createTodo",(function(e){return b("\n    mutation createTodo($input: CreateTodoInput!) {\n  createTodo(input: $input) {\n    id\n    task\n    done\n  }\n}\n    ",e)()}),e)),u=s.mutate;return Object(w.jsx)(te,{placeholder:"Add New",value:r,onChange:function(e){return i(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&u({input:{task:r.trim(),done:!1,user_id:"1"}})}})},re=function(){var e=D().query,t=q();return Object(w.jsx)(te,{placeholder:"Search",value:e,onChange:function(e){var n=e.target.value;t({type:j.SearchItem,stringPayload:n})}})},oe=function(){switch(D().inputMode){case x.Add:return Object(w.jsx)(ne,{});case x.Search:return Object(w.jsx)(re,{});default:return null}},ie=l.a.section.withConfig({displayName:"TodoList__Section",componentId:"sc-1pak9km-0"})(["background-color:#fff;padding:2rem 2rem 1rem 2rem;border:0.1rem solid #ddd;border-radius:0.2rem;margin:3rem auto;min-width:32rem;max-width:60rem;position:relative;"]),ae=l.a.ul.withConfig({displayName:"TodoList__StyledList",componentId:"sc-1pak9km-1"})(["list-style-type:none;padding-left:0;"]),ce=function(){var e,t=L().data;return Object(w.jsxs)(ie,{children:[Object(w.jsx)(z,{}),Object(w.jsx)(oe,{}),Object(w.jsx)(ae,{children:null===t||void 0===t||null===(e=t.todos)||void 0===e?void 0:e.map((function(e){return e&&Object(w.jsx)(k,{data:e},e.id)}))}),Object(w.jsx)(ee,{})]})},de=new d.QueryClient({queryCache:new d.QueryCache({onError:function(e){return u.b.error("Something went wrong: ".concat(e.message))}})}),se=function(){return Object(w.jsxs)(d.QueryClientProvider,{client:de,children:[Object(w.jsx)($,{children:Object(w.jsx)(ce,{})}),Object(w.jsx)(u.a,{}),Object(w.jsx)(s.ReactQueryDevtools,{initialIsOpen:!0})]})};c.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(se,{})}),document.getElementById("root")),E&&E instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(e){var t=e.getCLS,n=e.getFID,r=e.getFCP,o=e.getLCP,i=e.getTTFB;t(E),n(E),r(E),o(E),i(E)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.e453c7ad.chunk.js.map