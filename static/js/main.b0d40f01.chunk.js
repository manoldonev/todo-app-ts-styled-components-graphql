(this["webpackJsonptodo-app-ts-styled-components-graphql"]=this["webpackJsonptodo-app-ts-styled-components-graphql"]||[]).push([[0],{63:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var r,o=n(0),i=n.n(o),a=n(26),c=n.n(a),d=(n(63),n(8)),s=n(49),u=n(30),l=n(5),p=n(11),f=n.n(p),h=n(18);function g(e,t){return Object(h.a)(f.a.mark((function n(){var r,o,i;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://fakeql.com/graphql/0bfe961b5d76d8f8ae63d882a1fadb8b",{method:"POST",body:JSON.stringify({query:e,variables:t})});case 2:return r=n.sent,n.next=5,r.json();case 5:if(!(o=n.sent).errors){n.next=9;break}throw i=o.errors[0].message,new Error(i);case 9:return n.abrupt("return",o.data);case 10:case"end":return n.stop()}}),n)})))}!function(e){e.Ceil="CEIL",e.Floor="FLOOR",e.Round="ROUND"}(r||(r={}));var m,b,j,y=function(e,t){return Object(d.useQuery)(void 0===e?["Todos"]:["Todos",e],g("\n    query Todos($page: Int, $limit: Int, $input: TodosWhere, $sort: String, $direction: String) {\n  todos(page: $page, limit: $limit, where: $input, sort: $sort, dir: $direction) {\n    id\n    task\n    done\n  }\n}\n    ",e),t)},x=n(36),v=n(14),O=n(15),w=n(2),T=l.a.div.withConfig({displayName:"SwipeToDelete__Wrapper",componentId:"sc-1nl5h0w-0"})(["position:relative;overflow:hidden;width:100%;"]),C=l.a.div.withConfig({displayName:"SwipeToDelete__BackgroundLayer",componentId:"sc-1nl5h0w-1"})(["position:absolute;z-index:0;width:100%;height:100%;display:flex;justify-content:flex-end;align-items:center;padding:0 1.5rem;color:white;background-color:#c70000;"]),I=l.a.div.withConfig({displayName:"SwipeToDelete__ForegroundLayer",componentId:"sc-1nl5h0w-2"})(["position:relative;z-index:1;height:100%;width:100%;background-color:#fff;display:flex;align-items:center;"]),_=function(e){var t=e.children,n=e.threshold,r=void 0===n?.3:n,i=e.onSwiped,a=e.onTap,c=Object(o.useRef)(null),d=Object(o.useRef)(null),s=Object(x.useSwipeable)({trackMouse:!0,preventDefaultTouchmoveEvent:!0,onTap:a,onSwipeStart:function(){c.current&&(c.current.style.transition="",c.current.style.transform="")},onSwiping:function(e){if(c.current){var t="translateX(".concat(e.deltaX,"px)");c.current.style.transform=t}if(d.current){var n=Math.min(Math.abs(e.deltaX)/100,1);d.current.style.opacity=n.toFixed(2)}},onSwiped:function(e){if(c.current){var t=e.deltaX,n=c.current.offsetWidth;Math.abs(t)>=n*r?(t=e.dir===x.LEFT?2*-n:n,i&&i(e)):t=0,c.current.style.transition="transform 0.5s ease-out",c.current.style.transform="translateX(".concat(t,"px)")}}});return Object(w.jsxs)(T,{children:[Object(w.jsxs)(C,{ref:d,children:[Object(w.jsx)(v.a,{icon:O.e,fixedWidth:!0,style:{marginRight:"auto"}}),Object(w.jsx)(v.a,{icon:O.e,fixedWidth:!0})]}),Object(w.jsx)(I,{onMouseDown:s.onMouseDown,ref:function(e){s.ref(e),c.current=e},children:t})]})},k=l.a.li.withConfig({displayName:"TodoItem__ListItem",componentId:"sc-51iy91-0"})(["background-color:#fff;border:none;border-bottom:0.1rem solid #ddd;&:last-child{border-bottom:none;}",""],(function(e){return e.done&&"\n    text-decoration: line-through;\n    color: #aaa;  \n    "})),P=l.a.div.withConfig({displayName:"TodoItem__Wrapper",componentId:"sc-51iy91-1"})(["display:flex;margin:1rem 0;min-height:2rem;"]),S=l.a.input.attrs({type:"checkbox"}).withConfig({displayName:"TodoItem__Checkbox",componentId:"sc-51iy91-2"})(["flex:1 0 auto;margin:0 1.5rem;height:2rem;width:2rem;"]),M=l.a.label.withConfig({displayName:"TodoItem__Label",componentId:"sc-51iy91-3"})(["margin-right:auto;display:flex;align-items:center;"]),N=function(e){var t,n=e.data,r=n.id,o=n.task,i=n.done,a=Object(d.useQueryClient)(),c=(t={onSuccess:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.invalidateQueries("Todos"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Object(d.useMutation)("updateTodo",(function(e){return g("\n    mutation updateTodo($id: ID!, $input: UpdateTodoInput!) {\n  updateTodo(id: $id, input: $input) {\n    id\n    task\n    done\n  }\n}\n    ",e)()}),t)),s=c.mutate,u=function(e){return Object(d.useMutation)("deleteTodo",(function(e){return g("\n    mutation deleteTodo($id: ID!) {\n  deleteTodo(id: $id)\n}\n    ",e)()}),e)}({onSuccess:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.invalidateQueries("Todos"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),l=u.mutate;return Object(w.jsx)(k,{done:i,children:Object(w.jsx)(_,{onSwiped:function(){l({id:r})},onTap:function(){s({id:r,input:{done:!i}})},children:Object(w.jsx)(P,{children:Object(w.jsxs)(M,{htmlFor:r,children:[Object(w.jsx)(S,{id:r,checked:i}),o]})})})})},F=n(37),D=n(19),A=n(31);!function(e){e[e.TogglePage=0]="TogglePage",e[e.ToggleFilter=1]="ToggleFilter",e[e.ToggleMode=2]="ToggleMode",e[e.SearchItem=3]="SearchItem"}(m||(m={})),function(e){e.All="all",e.Active="active",e.Done="done"}(b||(b={})),function(e){e[e.Add=0]="Add",e[e.Search=1]="Search",e[e.None=2]="None"}(j||(j={}));var $=i.a.createContext(null),L=i.a.createContext(null);function E(e,t){switch(t.type){case m.TogglePage:return Object(A.a)(e,(function(e){if(null==t.numericPayload)throw new Error("".concat(t.type,": payload not specified"));e.currentPage=t.numericPayload}));case m.ToggleFilter:return Object(A.a)(e,(function(e){var n=t.stringPayload;if(null==n||!(n in b))throw new Error("".concat(t.type,": filter ").concat(n," not found"));e.filterMode=b[n],e.currentPage=1}));case m.ToggleMode:return Object(A.a)(e,(function(e){var n=t.numericPayload;if(null==n||!(n in j))throw new Error("".concat(t.type,": input mode ").concat(n," not found"));e.inputMode!==n&&(e.inputMode=n,e.filterMode=b.All,e.currentPage=1)}));default:throw new Error("Unhandled action type")}}var q,Q=function(e){var t=e.children,n=e.reducer,r=void 0===n?E:n,o=i.a.useReducer(r,{currentPage:1,pageSize:5,hasMore:!1,filterMode:b.All,inputMode:j.Add,query:""}),a=Object(D.a)(o,2),c=a[0],d=a[1];return Object(w.jsx)($.Provider,{value:c,children:Object(w.jsx)(L.Provider,{value:d,children:t})})};function W(){var e=i.a.useContext($);if(null===e)throw new Error("useTodoState hook works in the context of a TodoProvider");return e}function z(){var e=i.a.useContext(L);if(null===e)throw new Error("useTodoDispatch hook works in the context of a TodoProvider ");return e}!function(e){e.Ascending="asc",e.Descending="desc"}(q||(q={}));var R,B=function(){var e,t=W(),n=t.currentPage,r=t.pageSize,o=t.filterMode,i=null;o===b.Active?i={done_eq:!1}:o===b.Done&&(i={done_eq:!0});var a={page:n,limit:r,input:i,sort:"id",direction:q.Descending},c=y(a,{keepPreviousData:!0,staleTime:5e3}),d=c.data,s=c.isFetching,u=c.isPreviousData,l=y(Object(F.a)(Object(F.a)({},a),{},{page:n+1})).data;return{data:d,isFetching:s,isPreviousData:u,hasMoreData:null!=(null===l||void 0===l||null===(e=l.todos)||void 0===e?void 0:e.length)&&l.todos.length>0}},X=l.a.h1.withConfig({displayName:"Header__StyledHeader",componentId:"sc-jmby8c-0"})(["margin:0;padding-bottom:2rem;text-align:center;text-transform:uppercase;"]),U=function(){return Object(w.jsx)(X,{children:"Things to do"})},J=l.a.button.attrs({type:"button"}).withConfig({displayName:"ImageButton",componentId:"sc-yfcf41-0"})(["background-color:transparent;border:0;font-size:calc(max(2rem,20px));transition:0.3s all;opacity:0.4;&:enabled{cursor:pointer;}&:hover:enabled{opacity:1;}"]),H=l.a.ul.withConfig({displayName:"Actions__ActionList",componentId:"sc-1a4n6g3-0"})(["flex:0 0 auto;list-style-type:none;border-right:0.1rem solid #ccc;margin-right:1.8rem;padding:0;"]),K=l.a.li.withConfig({displayName:"Actions__ActionItem",componentId:"sc-1a4n6g3-1"})(["display:inline;"]),G=Object(l.a)(J).withConfig({displayName:"Actions__ActionButton",componentId:"sc-1a4n6g3-2"})(["margin:0 0.8rem 0 0;",""],(function(e){return e.active&&"opacity: 1;"})),V=function(){var e=W().inputMode,t=z(),n=function(e){t({type:m.ToggleMode,numericPayload:parseInt(e.currentTarget.value,10)})};return Object(w.jsxs)(H,{children:[Object(w.jsx)(K,{children:Object(w.jsx)(G,{active:e===j.Add,value:j.Add,"aria-label":"Create Mode",onClick:n,children:Object(w.jsx)(v.a,{icon:O.c,fixedWidth:!0})})}),Object(w.jsx)(K,{children:Object(w.jsx)(G,{active:e===j.Search,value:j.Search,"aria-label":"Search Mode",onClick:n,children:Object(w.jsx)(v.a,{icon:O.d,fixedWidth:!0})})})]})},Y=l.a.ul.withConfig({displayName:"Filter__FilterList",componentId:"sc-160ur2e-0"})(["flex:0 0 auto;list-style-type:none;padding-left:0;"]),Z=l.a.li.withConfig({displayName:"Filter__FilterItem",componentId:"sc-160ur2e-1"})(["display:inline;"]),ee=l.a.button.attrs({type:"button"}).withConfig({displayName:"Filter__Button",componentId:"sc-160ur2e-2"})(["text-transform:capitalize;background-color:transparent;color:inherit;margin:0.3rem;padding:0.3rem 0.7rem;text-decoration:none;border:0.1rem solid transparent;border-radius:0.3rem;&:hover{border-color:rgba(175,47,47,0.1);}",""],(function(e){return e.active&&"\n    border-color: rgba(175, 47, 47, 0.2);\n  "})),te=function(){var e=W().filterMode,t=z();return Object(w.jsx)(Y,{children:Object.entries(b).map((function(n){var r=Object(D.a)(n,2),o=r[0],i=r[1];return Object(w.jsx)(Z,{children:Object(w.jsx)(ee,{active:i===e,onClick:function(){return function(e){t({type:m.ToggleFilter,stringPayload:e})}(o)},children:i})},o)}))})},ne=l.a.ul.withConfig({displayName:"Pagination__PaginationList",componentId:"sc-odef2i-0"})(["margin-right:auto;list-style-type:none;padding:0;"]),re=l.a.li.withConfig({displayName:"Pagination__PaginationItem",componentId:"sc-odef2i-1"})(["display:inline;"]),oe=function(){var e=W().currentPage,t=z(),n=B(),r=n.isPreviousData,o=n.hasMoreData;return Object(w.jsxs)(w.Fragment,{children:["Current page: ",e,Object(w.jsxs)(ne,{children:[Object(w.jsx)(re,{children:Object(w.jsx)(J,{"aria-label":"Previous Page",onClick:function(){return t({type:m.TogglePage,numericPayload:Math.max(e-1,1)})},disabled:1===e,children:Object(w.jsx)(v.a,{icon:O.a,fixedWidth:!0})})}),Object(w.jsx)(re,{children:Object(w.jsx)(J,{"aria-label":"Next Page",onClick:function(){return t({type:m.TogglePage,numericPayload:o?e+1:e})},disabled:r||!o,children:Object(w.jsx)(v.a,{icon:O.b,fixedWidth:!0})})})]})]})},ie=l.a.div.withConfig({displayName:"Footer__StyledFooter",componentId:"sc-1a3cbzi-0"})(["display:flex;flex-wrap:wrap;align-items:baseline;border-top:0.1rem solid #ddd;background-color:#f4fce8;margin:0 -2rem -1rem -2rem;padding:0 2rem;color:#707070;"]),ae=function(){return Object(w.jsxs)(ie,{children:[Object(w.jsx)(V,{}),Object(w.jsx)(oe,{}),Object(w.jsx)(te,{})]})},ce=l.a.input.attrs({type:"text"}).withConfig({displayName:"InputBox__StyledInput",componentId:"sc-26uffi-0"})(["display:block;width:100%;height:3.4rem;padding:0.6rem 1.2rem;font-size:1.4rem;line-height:1.42857143;color:#555;background-color:#fff;border:1px solid #ccc;"]),de=function(){var e,t=Object(o.useState)(""),n=Object(D.a)(t,2),r=n[0],i=n[1],a=z(),c=Object(d.useQueryClient)(),s=(e={onSuccess:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.invalidateQueries("Todos"),i(""),a({type:m.TogglePage,numericPayload:1});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Object(d.useMutation)("createTodo",(function(e){return g("\n    mutation createTodo($input: CreateTodoInput!) {\n  createTodo(input: $input) {\n    id\n    task\n    done\n  }\n}\n    ",e)()}),e)),u=s.mutate;return Object(w.jsx)(ce,{placeholder:"Add New",value:r,onChange:function(e){return i(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&u({input:{task:r.trim(),done:!1,user_id:"1"}})}})},se=function(){var e=W().query,t=z();return Object(w.jsx)(ce,{placeholder:"Search",value:e,onChange:function(e){var n=e.target.value;t({type:m.SearchItem,stringPayload:n})}})},ue=function(){switch(W().inputMode){case j.Add:return Object(w.jsx)(de,{});case j.Search:return Object(w.jsx)(se,{});default:return null}},le=l.a.section.withConfig({displayName:"TodoList__Section",componentId:"sc-1pak9km-0"})(["background-color:#fff;padding:2rem 2rem 1rem 2rem;border:0.1rem solid #ddd;border-radius:0.2rem;margin:3rem auto;min-width:32rem;max-width:60rem;position:relative;"]),pe=l.a.ul.withConfig({displayName:"TodoList__StyledList",componentId:"sc-1pak9km-1"})(["list-style-type:none;padding-left:0;"]),fe=function(){var e,t=B().data;return Object(w.jsxs)(le,{children:[Object(w.jsx)(U,{}),Object(w.jsx)(ue,{}),Object(w.jsx)(pe,{children:null===t||void 0===t||null===(e=t.todos)||void 0===e?void 0:e.map((function(e){return e&&Object(w.jsx)(N,{data:e},e.id)}))}),Object(w.jsx)(ae,{})]})},he=new d.QueryClient({queryCache:new d.QueryCache({onError:function(e){return u.b.error("Something went wrong: ".concat(e.message))}})}),ge=function(){return Object(w.jsxs)(d.QueryClientProvider,{client:he,children:[Object(w.jsx)(Q,{children:Object(w.jsx)(fe,{})}),Object(w.jsx)(u.a,{}),Object(w.jsx)(s.ReactQueryDevtools,{initialIsOpen:!0})]})};c.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(ge,{})}),document.getElementById("root")),R&&R instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(e){var t=e.getCLS,n=e.getFID,r=e.getFCP,o=e.getLCP,i=e.getTTFB;t(R),n(R),r(R),o(R),i(R)}))}},[[73,1,2]]]);
//# sourceMappingURL=main.b0d40f01.chunk.js.map